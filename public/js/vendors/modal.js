/*! For license information please see modal.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[42],{1186:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(7456),r={class:"modal-mask"},o={class:"modal-wrapper"},i={class:"modal-container"},s={style:{margin:"0","font-size":"1.2em"}},l=["onUpdate:modelValue","index"],c=["value"],d=["disabled"],u=["href"];var h=n(3899);const p={props:["categories","selector","setting"],created:function(){},data:function(){return{categoryIndex:[],selected:null}},computed:{},methods:{try_input:function(e){this.selected=e},json:function(e){return JSON.stringify(e)},fromJson:function(e){return JSON.parse(e)},exitEnd:function(){this.$parent.$parent.showModal=!1},exit:function(){if("purchasers"==this.selector)return this.$emit("exit",this.selected,this.selector);if(this.selected.category_attributes&&this.selected.category_attributes.length||this.selected.category_type)this.$toast.error("არჩეული ატრიბუტი განეკუთნება კატეგორიის ტიპს!",{position:"top-right",furation:7e3});else{var e=new h.A.Tree(this.categoryIndex.category_attributes).getParents(this.selected);this.selected.category_name=e,this.$emit("exit",this.selected,this.selector)}},purchiser:function(){},category:function(){if(event.target.value){var e=this.fromJson(event.target.value),t=Number(event.target.getAttribute("index"))+1,n=Number(event.target.getAttribute("index"));e.category_attributes&&(this.categoryIndex=e);var a=n>0?e.nested:e.category_attributes;this.categories.splice(t,this.categories.length),a.length&&(this.categories[t]={selected:"",res:a}),this.selected=e}},redirect:function(e){"categories"==this.selector?this.category():this.selector}}};var m=n(5072),f=n.n(m),g=n(5083),v={insert:"head",singleton:!1};f()(g.A,v);g.A.locals;const b=(0,n(6262).A)(p,[["render",function(e,t,n,h,p,m){var f=(0,a.resolveComponent)("v-select");return(0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("h3",null," აირჩიეთ "+(0,a.toDisplayString)("purchasers"==n.selector?"მყიდველი":"ატრიბუტი"),1),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.categories,(function(e,r){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"form-group",key:r,onChange:t[1]||(t[1]=function(){return m.redirect&&m.redirect.apply(m,arguments)})},["purchasers"==n.selector?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,modelValue:e.selected,"onUpdate:modelValue":function(t){return e.selected=t},options:e.res,"get-option-label":function(e){return e?e.name+" / "+e.subj_name:""},"onOption:selected":t[0]||(t[0]=function(e){return m.try_input(e)})},{option:(0,a.withCtx)((function(e){return[(0,a.createElementVNode)("h3",s,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)("em",null,(0,a.toDisplayString)(e.subj_name)+" "+(0,a.toDisplayString)(e.subj_address),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","options","get-option-label"])):(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("select",{key:1,title:"აირჩიეთ",placeholder:"აირჩიეთ","onUpdate:modelValue":function(t){return e.selected=t},class:"form-control",index:r},[t[4]||(t[4]=(0,a.createElementVNode)("option",{value:"",disabled:"",selected:""}," --- აირჩიეთ --- ",-1)),e?((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,{key:0},(0,a.renderList)(e.res,(function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("option",{value:m.json(e),key:t},(0,a.toDisplayString)("purchasers"==n.selector?e.name+" / "+e.subj_name:e.name),9,c)})),128)):(0,a.createCommentVNode)("",!0)],8,l)),[[a.vModelSelect,e.selected]])],32)})),128)),(0,a.createElementVNode)("button",{disabled:!p.selected,type:"button",class:"btn btn-sm btn-success mr-1",onClick:t[2]||(t[2]=function(){return m.exit&&m.exit.apply(m,arguments)})}," არჩევა ",8,d),(0,a.createElementVNode)("button",{type:"button",class:"btn btn-sm btn-warning mr-1",onClick:t[3]||(t[3]=function(){return m.exitEnd&&m.exitEnd.apply(m,arguments)})}," დახურვა "),"purchasers"==n.selector?((0,a.openBlock)(),(0,a.createElementBlock)("a",{key:0,href:n.setting.url.nested.edit,class:"btn btn-sm btn-primary"},"მომხმარებლის დამატება",8,u)):(0,a.createCommentVNode)("",!0)])])])}],["__scopeId","data-v-f0e41c2a"]])},3135:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(4991),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,".signature-styling[data-v-4599bb80]{margin:auto}.modal.full-screen[data-v-4599bb80]{align-items:center;display:flex;height:100dvh;justify-content:center;left:0;overflow:hidden;position:fixed;top:0;width:100vw}.modal.full-screen .modal-dialog[data-v-4599bb80]{height:100dvh;margin:0;max-width:none;width:100vw}.modal.full-screen .modal-content[data-v-4599bb80]{border:none;border-radius:0;height:100%;width:100%}.modal-body[data-v-4599bb80]{height:calc(100% - 56px);overflow-y:auto}.rotation-controls[data-v-4599bb80]{display:flex;justify-content:space-around;margin-top:10px}","",{version:3,sources:["webpack://./resources/js/app/components/SignatureModal.vue"],names:[],mappings:"AAmIA,oCACI,WACJ,CAEA,oCAEI,kBAAmB,CADnB,YAAa,CAOb,aAAc,CALd,sBAAuB,CAGvB,MAAO,CAGP,eAAgB,CALhB,cAAe,CACf,KAAM,CAEN,WAGJ,CAEA,kDAEI,aAAc,CACd,QAAS,CACT,cAAe,CAHf,WAIJ,CAEA,mDAGI,WAAY,CACZ,eAAgB,CAFhB,WAAY,CADZ,UAIJ,CAEA,6BACI,wBAAyB,CACzB,eACJ,CAEA,oCACI,YAAa,CACb,4BAA6B,CAC7B,eACJ",sourcesContent:['<template>\n    <div\n        class="modal fade show"\n        tabindex="-1"\n        role="dialog"\n        v-if="isVisible"\n        :class="{ \'full-screen\': true }"\n    >\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title">ხელმოწერა</h5>\n                    <a\n                        type="button"\n                        class="close"\n                        @click="closeAndSave"\n                        aria-label="დახურვა"\n                    >\n                        <span aria-hidden="true">&times;</span>\n                    </a>\n                </div>\n                <div class="modal-body">\n                    <VueSignaturePad\n                        ref="signaturePad"\n                        class="signature-styling"\n                        :options="options"\n                        width="80%"\n                    ></VueSignaturePad>\n                </div>\n                <div class="modal-footer">\n                    <a class="btn btn-primary" @click="saveSignature($event)">\n                        შენახვა\n                    </a>\n\n                    <a class="btn btn-danger" @click="clearSignature">წაშლა</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    components: {},\n    props: {\n        isVisible: {\n            type: Boolean,\n            default: false,\n        },\n        signatureDataUrl: {\n            type: String,\n            default: "",\n        },\n    },\n    watch: {\n        isVisible(newValue) {\n            if (newValue && this.signatureDataUrl) {\n                this.$nextTick(() => {\n                    this.$refs.signaturePad.fromDataURL(this.signatureDataUrl);\n                });\n            }\n        },\n    },\n    data() {\n        return {\n            isFullScreen: false,\n            options: {\n                // Define any signature pad options here\n            },\n            rotationAngle: 90,\n        };\n    },\n    methods: {\n        toggleFullScreen() {\n            this.isFullScreen = !this.isFullScreen;\n        },\n        closeAndSave() {\n            const dataUrl = this.$refs.signaturePad.saveSignature();\n            this.$emit("close", [dataUrl]);\n        },\n        closeModal() {\n            this.$emit("close");\n        },\n        saveSignature(event) {\n            event.preventDefault(); // Prevent the default form submission behavior\n\n            const dataUrl = this.$refs.signaturePad.saveSignature();\n            this.$emit("close", [dataUrl]);\n        },\n        clearSignature() {\n            this.$refs.signaturePad.clearSignature();\n        },\n        rotateCanvas(degrees) {\n            this.rotationAngle = degrees;\n            const canvas = this.$refs.signaturePad.$el.querySelector("canvas");\n            const context = canvas.getContext("2d");\n\n            // Save current image\n            const image = new Image();\n            image.src = canvas.toDataURL();\n\n            image.onload = () => {\n                // Clear the canvas\n                context.clearRect(0, 0, canvas.width, canvas.height);\n\n                // Save the context state\n                context.save();\n\n                // Translate to center of canvas\n                context.translate(canvas.width / 2, canvas.height / 2);\n\n                // Rotate the canvas\n                context.rotate((degrees * Math.PI) / 180);\n\n                // Draw the image in the rotated context\n                context.drawImage(image, -canvas.width / 2, -canvas.height / 2);\n\n                // Restore the context state\n                context.restore();\n            };\n        },\n    },\n};\n<\/script>\n<style>\ncanvas {\n    border: 1px solid rgb(157, 156, 156) !important;\n    border-radius: 3px;\n}\n</style>\n<style scoped>\n.signature-styling {\n    margin: auto;\n}\n\n.modal.full-screen {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100dvh;\n    overflow: hidden;\n}\n\n.modal.full-screen .modal-dialog {\n    width: 100vw;\n    height: 100dvh;\n    margin: 0;\n    max-width: none;\n}\n\n.modal.full-screen .modal-content {\n    width: 100%;\n    height: 100%;\n    border: none;\n    border-radius: 0;\n}\n\n.modal-body {\n    height: calc(100% - 56px); /* Adjust based on header height */\n    overflow-y: auto;\n}\n\n.rotation-controls {\n    display: flex;\n    justify-content: space-around;\n    margin-top: 10px;\n}\n</style>\n'],sourceRoot:""}]);const s=i},4129:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(4991),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"canvas{border:1px solid #9d9c9c!important;border-radius:3px}","",{version:3,sources:["webpack://./resources/js/app/components/SignatureModal.vue"],names:[],mappings:"AA6HA,OACI,kCAA+C,CAC/C,iBACJ",sourcesContent:['<template>\n    <div\n        class="modal fade show"\n        tabindex="-1"\n        role="dialog"\n        v-if="isVisible"\n        :class="{ \'full-screen\': true }"\n    >\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title">ხელმოწერა</h5>\n                    <a\n                        type="button"\n                        class="close"\n                        @click="closeAndSave"\n                        aria-label="დახურვა"\n                    >\n                        <span aria-hidden="true">&times;</span>\n                    </a>\n                </div>\n                <div class="modal-body">\n                    <VueSignaturePad\n                        ref="signaturePad"\n                        class="signature-styling"\n                        :options="options"\n                        width="80%"\n                    ></VueSignaturePad>\n                </div>\n                <div class="modal-footer">\n                    <a class="btn btn-primary" @click="saveSignature($event)">\n                        შენახვა\n                    </a>\n\n                    <a class="btn btn-danger" @click="clearSignature">წაშლა</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    components: {},\n    props: {\n        isVisible: {\n            type: Boolean,\n            default: false,\n        },\n        signatureDataUrl: {\n            type: String,\n            default: "",\n        },\n    },\n    watch: {\n        isVisible(newValue) {\n            if (newValue && this.signatureDataUrl) {\n                this.$nextTick(() => {\n                    this.$refs.signaturePad.fromDataURL(this.signatureDataUrl);\n                });\n            }\n        },\n    },\n    data() {\n        return {\n            isFullScreen: false,\n            options: {\n                // Define any signature pad options here\n            },\n            rotationAngle: 90,\n        };\n    },\n    methods: {\n        toggleFullScreen() {\n            this.isFullScreen = !this.isFullScreen;\n        },\n        closeAndSave() {\n            const dataUrl = this.$refs.signaturePad.saveSignature();\n            this.$emit("close", [dataUrl]);\n        },\n        closeModal() {\n            this.$emit("close");\n        },\n        saveSignature(event) {\n            event.preventDefault(); // Prevent the default form submission behavior\n\n            const dataUrl = this.$refs.signaturePad.saveSignature();\n            this.$emit("close", [dataUrl]);\n        },\n        clearSignature() {\n            this.$refs.signaturePad.clearSignature();\n        },\n        rotateCanvas(degrees) {\n            this.rotationAngle = degrees;\n            const canvas = this.$refs.signaturePad.$el.querySelector("canvas");\n            const context = canvas.getContext("2d");\n\n            // Save current image\n            const image = new Image();\n            image.src = canvas.toDataURL();\n\n            image.onload = () => {\n                // Clear the canvas\n                context.clearRect(0, 0, canvas.width, canvas.height);\n\n                // Save the context state\n                context.save();\n\n                // Translate to center of canvas\n                context.translate(canvas.width / 2, canvas.height / 2);\n\n                // Rotate the canvas\n                context.rotate((degrees * Math.PI) / 180);\n\n                // Draw the image in the rotated context\n                context.drawImage(image, -canvas.width / 2, -canvas.height / 2);\n\n                // Restore the context state\n                context.restore();\n            };\n        },\n    },\n};\n<\/script>\n<style>\ncanvas {\n    border: 1px solid rgb(157, 156, 156) !important;\n    border-radius: 3px;\n}\n</style>\n<style scoped>\n.signature-styling {\n    margin: auto;\n}\n\n.modal.full-screen {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100dvh;\n    overflow: hidden;\n}\n\n.modal.full-screen .modal-dialog {\n    width: 100vw;\n    height: 100dvh;\n    margin: 0;\n    max-width: none;\n}\n\n.modal.full-screen .modal-content {\n    width: 100%;\n    height: 100%;\n    border: none;\n    border-radius: 0;\n}\n\n.modal-body {\n    height: calc(100% - 56px); /* Adjust based on header height */\n    overflow-y: auto;\n}\n\n.rotation-controls {\n    display: flex;\n    justify-content: space-around;\n    margin-top: 10px;\n}\n</style>\n'],sourceRoot:""}]);const s=i},5083:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(4991),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,".modal-mask[data-v-f0e41c2a]{background-color:rgba(0,0,0,.5);display:table;height:100%;left:0;position:fixed;top:0;transition:opacity .3s ease;width:100%;z-index:10}.modal-wrapper[data-v-f0e41c2a]{display:table-cell;vertical-align:middle}.modal-container[data-v-f0e41c2a]{background-color:#fff;border-radius:2px;box-shadow:0 2px 8px rgba(0,0,0,.33);font-family:Helvetica,Arial,sans-serif;margin:0 auto;min-height:30vh;padding:20px 30px;transition:all .3s ease;width:50%}.modal-header h3[data-v-f0e41c2a]{color:#42b983;font-size:17px;margin-top:0}.modal-body[data-v-f0e41c2a]{margin:20px 0}.modal-default-button[data-v-f0e41c2a]{float:right}","",{version:3,sources:["webpack://./resources/js/app/components/Modal.vue"],names:[],mappings:"AA6KA,6BAOI,+BAAoC,CACpC,aAAc,CAFd,WAAY,CAFZ,MAAO,CAHP,cAAe,CAEf,KAAM,CAMN,2BAA6B,CAJ7B,UAAW,CAHX,UAQJ,CAEA,gCACI,kBAAmB,CACnB,qBACJ,CAEA,kCAKI,qBAAsB,CACtB,iBAAkB,CAClB,oCAAyC,CAEzC,sCAAyC,CAPzC,aAAgB,CAEhB,eAAgB,CADhB,iBAAkB,CAKlB,uBAAyB,CAPzB,SASJ,CAEA,kCAEI,aAAc,CACd,cAAe,CAFf,YAGJ,CAEA,6BACI,aACJ,CAEA,uCACI,WACJ",sourcesContent:['<template>\n    <div class="modal-mask">\n        <div class="modal-wrapper">\n            <div class="modal-container">\n                <h3>\n                    აირჩიეთ\n                    {{ selector == "purchasers" ? "მყიდველი" : "ატრიბუტი" }}\n                </h3>\n\n                <div\n                    class="form-group"\n                    v-for="(item, index) in categories"\n                    :key="index"\n                    @change="redirect"\n                >\n                    <v-select\n                        v-if="selector == \'purchasers\'"\n                        v-model="item.selected"\n                        :options="item.res"\n                        :get-option-label="\n                            (i) => (i ? i.name + \' / \' + i.subj_name : \'\')\n                        "\n                        @option:selected="(e) => try_input(e)"\n                    >\n                        <template #option="i">\n                            <h3 style="margin: 0; font-size: 1.2em">\n                                {{ i.name }}\n                            </h3>\n                            <em>{{ i.subj_name }} {{ i.subj_address }}</em>\n                        </template>\n                    </v-select>\n                    <select\n                        v-else\n                        title="აირჩიეთ"\n                        placeholder="აირჩიეთ"\n                        v-model="item.selected"\n                        class="form-control"\n                        :index="index"\n                    >\n                        <option value="" disabled selected>\n                            --- აირჩიეთ ---\n                        </option>\n                        <option\n                            v-if="item"\n                            v-for="(i, index2) in item.res"\n                            :value="json(i)"\n                            :key="index2"\n                        >\n                            {{\n                                selector == "purchasers"\n                                    ? i.name + " / " + i.subj_name\n                                    : i.name\n                            }}\n                        </option>\n                    </select>\n                </div>\n\n                <button\n                    :disabled="!selected"\n                    type="button"\n                    class="btn btn-sm btn-success mr-1"\n                    @click="exit"\n                >\n                    არჩევა\n                </button>\n\n                <button\n                    type="button"\n                    class="btn btn-sm btn-warning mr-1"\n                    @click="exitEnd"\n                >\n                    დახურვა\n                </button>\n\n                <a\n                    v-if="selector == \'purchasers\'"\n                    :href="setting.url.nested.edit"\n                    class="btn btn-sm btn-primary"\n                    >მომხმარებლის დამატება</a\n                >\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Util from "Util";\n\nexport default {\n    props: ["categories", "selector", "setting"],\n    created() {},\n    data() {\n        return {\n            categoryIndex: [],\n            selected: null,\n        };\n    },\n    computed: {},\n    methods: {\n        try_input(value) {\n            this.selected = value;\n        },\n\n        json(i) {\n            return JSON.stringify(i);\n        },\n\n        fromJson(i) {\n            return JSON.parse(i);\n        },\n\n        exitEnd() {\n            this.$parent.$parent.showModal = false;\n        },\n\n        exit() {\n            if (this.selector == "purchasers")\n                return this.$emit("exit", this.selected, this.selector);\n\n            if (\n                (this.selected.category_attributes &&\n                    this.selected.category_attributes.length) ||\n                this.selected.category_type\n            ) {\n                this.$toast.error(\n                    "არჩეული ატრიბუტი განეკუთნება კატეგორიის ტიპს!",\n                    { position: "top-right", furation: 7000 }\n                );\n            } else {\n                let tree = new Util.Tree(\n                    this.categoryIndex.category_attributes\n                );\n                let treeName = tree.getParents(this.selected);\n                this.selected.category_name = treeName;\n\n                this.$emit("exit", this.selected, this.selector);\n            }\n        },\n\n        purchiser() {},\n\n        category() {\n            if (event.target.value) {\n                let res = this.fromJson(event.target.value);\n                let nextIndex = Number(event.target.getAttribute("index")) + 1;\n                let index = Number(event.target.getAttribute("index"));\n\n                if (res.category_attributes) this.categoryIndex = res;\n\n                let result = index > 0 ? res.nested : res.category_attributes;\n\n                this.categories.splice(nextIndex, this.categories.length);\n\n                if (result.length) {\n                    this.categories[nextIndex] = { selected: "", res: result };\n                }\n\n                this.selected = res;\n            }\n        },\n\n        redirect(event) {\n            if (this.selector == "categories") {\n                this.category();\n            } else if (this.selector == "purchasers") {\n                // this.selected = this.fromJson(event.target.value);\n            }\n        },\n    },\n};\n<\/script>\n\n<style scoped>\n.modal-mask {\n    position: fixed;\n    z-index: 10;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: table;\n    transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n    display: table-cell;\n    vertical-align: middle;\n}\n\n.modal-container {\n    width: 50%;\n    margin: 0px auto;\n    padding: 20px 30px;\n    min-height: 30vh;\n    background-color: #fff;\n    border-radius: 2px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n    transition: all 0.3s ease;\n    font-family: Helvetica, Arial, sans-serif;\n}\n\n.modal-header h3 {\n    margin-top: 0;\n    color: #42b983;\n    font-size: 17px;\n}\n\n.modal-body {\n    margin: 20px 0;\n}\n\n.modal-default-button {\n    float: right;\n}\n</style>\n'],sourceRoot:""}]);const s=i},6787:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(7456),r={key:0,class:"modal fade show",tabindex:"-1",role:"dialog"},o={class:"modal-dialog",role:"document"},i={class:"modal-content"},s={class:"modal-header"},l={class:"modal-title"},c={class:"modal-body"},d={class:"modal-description"};const u={props:["isVisible","file"],methods:{confirmDelete:function(){confirm("Are you sure you want to delete this file?")&&this.deleteFile()},deleteFile:function(){var e=this;console.log("Delete",this.file),axios.delete("/purchaser/media/".concat(this.file.file.id)).then((function(t){e.$emit("fileDeleted"),e.closeModal()})).catch((function(e){console.error("Error deleting file",e)}))},openInNewTab:function(){window.open(this.file.serverId,"_blank"),this.closeModal()},downloadFile:function(){var e=document.createElement("a");e.href=this.file.serverId,e.target="_blank",e.download=this.file.file.name,e.click(),this.closeModal()},closeModal:function(){this.$emit("close")}}};const h=(0,n(6262).A)(u,[["render",function(e,t,n,u,h,p){return n.isVisible?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("h5",l,(0,a.toDisplayString)(this.file.file.name),1),(0,a.createElementVNode)("button",{type:"button",class:"close",onClick:t[0]||(t[0]=function(){return p.closeModal&&p.closeModal.apply(p,arguments)}),"aria-label":"Close"},t[4]||(t[4]=[(0,a.createElementVNode)("span",{"aria-hidden":"true"},"×",-1)]))]),(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("p",d," კომენტარი: "+(0,a.toDisplayString)(this.file.file.comment),1),(0,a.createElementVNode)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return p.confirmDelete&&p.confirmDelete.apply(p,arguments)})}," Delete "),(0,a.createElementVNode)("button",{type:"button",class:"btn btn-secondary ml-1",onClick:t[2]||(t[2]=function(){return p.openInNewTab&&p.openInNewTab.apply(p,arguments)})}," View "),(0,a.createElementVNode)("button",{type:"button",class:"btn btn-success ml-1",onClick:t[3]||(t[3]=function(){return p.downloadFile&&p.downloadFile.apply(p,arguments)})}," Download ")])])])])):(0,a.createCommentVNode)("",!0)}]])},9014:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(7456),r={key:0,class:"modal fade show",tabindex:"-1",role:"dialog"},o={class:"modal-dialog",role:"document"},i={class:"modal-content"},s={class:"modal-header"},l={class:"modal-title"},c={class:"modal-body"},d={class:"form-group"};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n,a){return Object.defineProperty(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a})}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(t,n,a,r){var o=n&&n.prototype instanceof m?n:m,i=Object.create(o.prototype);return l(i,"_invoke",function(t,n,a){var r=1;return function(o,i){if(3===r)throw Error("Generator is already running");if(4===r){if("throw"===o)throw i;return{value:e,done:!0}}for(a.method=o,a.arg=i;;){var s=a.delegate;if(s){var l=C(s,a);if(l){if(l===p)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(1===r)throw r=4,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=3;var c=d(t,n,a);if("normal"===c.type){if(r=a.done?4:2,c.arg===p)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r=4,a.method="throw",a.arg=c.arg)}}}(t,a,new S(r||[])),!0),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p={};function m(){}function f(){}function g(){}var v={};l(v,o,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(V([])));y&&y!==n&&a.call(y,o)&&(v=y);var A=g.prototype=m.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,o,i,s){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==u(h)&&a.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(h).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(l.arg)}var r;l(this,"_invoke",(function(e,a){function o(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(o,o):o()}),!0)}function C(t,n){var a=n.method,r=t.i[a];if(r===e)return n.delegate=null,"throw"===a&&t.i.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),p;var o=d(r,t.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.r]=i.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function E(e){this.tryEntries.push(e)}function k(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function S(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function V(t){if(null!=t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(u(t)+" is not iterable")}return f.prototype=g,l(A,"constructor",g),l(g,"constructor",f),f.displayName=l(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},x(w.prototype),l(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new w(c(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(A),l(A,s,"Generator"),l(A,o,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.unshift(a);return function e(){for(;n.length;)if((a=n.pop())in t)return e.value=a,e.done=!1,e;return e.done=!0,e}},t.values=V,S.prototype={constructor:S,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(e){i.type="throw",i.arg=t,n.next=e}for(var r=n.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o[4],s=this.prev,l=o[1],c=o[2];if(-1===o[0])return a("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<l)return this.method="next",this.arg=e,a(l),!0;if(s<c)return a(c),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a[0]>-1&&a[0]<=this.prev&&this.prev<a[2]){var r=a;break}}r&&("break"===e||"continue"===e)&&r[0]<=t&&t<=r[2]&&(r=null);var o=r?r[4]:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r[2],p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var a=n[4];if("throw"===a.type){var r=a.arg;k(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={i:V(t),r:n,n:a},"next"===this.method&&(this.arg=e),p}},t}function p(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){p(o,a,r,i,s,"next",e)}function s(e){p(o,a,r,i,s,"throw",e)}i(void 0)}))}}const f={props:["isVisible","selectedDate","purchaserId","onEdit","eventId"],data:function(){return{title:"",data:"2024-01-01"}},created:function(){this.initializeModal()},watch:{isVisible:function(e){e&&this.initializeModal()}},methods:{closeModal:function(){this.$emit("close-modal")},initializeModal:function(){var e=this;return m(h().mark((function t(){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.onEdit){t.next=12;break}return t.prev=1,t.next=4,axios.get("/calendar/events/".concat(e.eventId));case 4:n=t.sent,a=n.data,e.title=a.title,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("Error fetching event data:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},processEvent:function(){var e=this;return m(h().mark((function t(){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("add-event",{title:e.title,date:e.selectedDate}),t.prev=1,n=document.cookie.replace(/(?:(?:^|.*;\s*)csrfToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),axios.defaults.headers.common["X-CSRF-Token"]=n,a=e.onEdit?"/calendar/update-event/".concat(e.eventId):"/calendar/add-event",t.next=7,axios.post(a,{date:e.selectedDate,title:e.title,purchaser_id:e.purchaserId});case 7:t.sent,e.$emit("eventStored"),e.isModalVisible=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),alert("Error: Failed to add event.");case 15:e.title="";case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}};const g=(0,n(6262).A)(f,[["render",function(e,t,n,u,h,p){return n.isVisible?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("h5",l," Add New Event On "+(0,a.toDisplayString)(this.selectedDate),1),(0,a.createElementVNode)("button",{type:"button",class:"close",onClick:t[0]||(t[0]=function(){return p.closeModal&&p.closeModal.apply(p,arguments)}),"aria-label":"Close"},t[3]||(t[3]=[(0,a.createElementVNode)("span",{"aria-hidden":"true"},"×",-1)]))]),(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,a.withModifiers)((function(){return p.processEvent&&p.processEvent.apply(p,arguments)}),["prevent"]))},[(0,a.createElementVNode)("div",d,[t[4]||(t[4]=(0,a.createElementVNode)("label",{for:"eventTitle"},"Title: ",-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return h.title=e}),id:"eventTitle",type:"text",placeholder:"Title",class:"form-control",required:""},null,512),[[a.vModelText,h.title]])]),t[5]||(t[5]=(0,a.createElementVNode)("button",{type:"submit",class:"btn btn-primary"}," Submit ",-1))],32)])])])])):(0,a.createCommentVNode)("",!0)}]])},9219:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(7456),r={class:"modal-dialog",role:"document"},o={class:"modal-content"},i={class:"modal-header"},s={class:"modal-body"},l={class:"modal-footer"};const c={components:{},props:{isVisible:{type:Boolean,default:!1},signatureDataUrl:{type:String,default:""}},watch:{isVisible:function(e){var t=this;e&&this.signatureDataUrl&&this.$nextTick((function(){t.$refs.signaturePad.fromDataURL(t.signatureDataUrl)}))}},data:function(){return{isFullScreen:!1,options:{},rotationAngle:90}},methods:{toggleFullScreen:function(){this.isFullScreen=!this.isFullScreen},closeAndSave:function(){var e=this.$refs.signaturePad.saveSignature();this.$emit("close",[e])},closeModal:function(){this.$emit("close")},saveSignature:function(e){e.preventDefault();var t=this.$refs.signaturePad.saveSignature();this.$emit("close",[t])},clearSignature:function(){this.$refs.signaturePad.clearSignature()},rotateCanvas:function(e){this.rotationAngle=e;var t=this.$refs.signaturePad.$el.querySelector("canvas"),n=t.getContext("2d"),a=new Image;a.src=t.toDataURL(),a.onload=function(){n.clearRect(0,0,t.width,t.height),n.save(),n.translate(t.width/2,t.height/2),n.rotate(e*Math.PI/180),n.drawImage(a,-t.width/2,-t.height/2),n.restore()}}}};var d=n(5072),u=n.n(d),h=n(4129),p={insert:"head",singleton:!1};u()(h.A,p);h.A.locals;var m=n(3135),f={insert:"head",singleton:!1};u()(m.A,f);m.A.locals;const g=(0,n(6262).A)(c,[["render",function(e,t,n,c,d,u){var h=(0,a.resolveComponent)("VueSignaturePad");return n.isVisible?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:(0,a.normalizeClass)(["modal fade show",{"full-screen":!0}]),tabindex:"-1",role:"dialog"},[(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",i,[t[4]||(t[4]=(0,a.createElementVNode)("h5",{class:"modal-title"},"ხელმოწერა",-1)),(0,a.createElementVNode)("a",{type:"button",class:"close",onClick:t[0]||(t[0]=function(){return u.closeAndSave&&u.closeAndSave.apply(u,arguments)}),"aria-label":"დახურვა"},t[3]||(t[3]=[(0,a.createElementVNode)("span",{"aria-hidden":"true"},"×",-1)]))]),(0,a.createElementVNode)("div",s,[(0,a.createVNode)(h,{ref:"signaturePad",class:"signature-styling",options:d.options,width:"80%"},null,8,["options"])]),(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("a",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return u.saveSignature(e)})}," შენახვა "),(0,a.createElementVNode)("a",{class:"btn btn-danger",onClick:t[2]||(t[2]=function(){return u.clearSignature&&u.clearSignature.apply(u,arguments)})},"წაშლა")])])])])):(0,a.createCommentVNode)("",!0)}],["__scopeId","data-v-4599bb80"]])}}]);
//# sourceMappingURL=modal.js.map